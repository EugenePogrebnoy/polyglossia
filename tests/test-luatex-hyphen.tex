\documentclass{minimal}
\directlua{dofile(kpse.find_file('luatex-hyphen.lua'))}
\directlua{dofile('test-luatex-hyphen.lua')}

\usepackage{polyglossia}
\setmainlanguage{english}
\setotherlanguage{german}

\usepackage{fontspec}

\def\gnaeherr{%
\begin{minipage}{2sp}
\hskip 1sp Gn√§digster Herr
\end{minipage}%
}

\begin{document}

Hello, world!

\gnaeherr

\begin{german}
\directlua{thelanguage()}
\directlua{luatexhyphen.loadlanguage('german', 29)}
Hallo, Welt!

\gnaeherr
\end{german}

\end{document}
